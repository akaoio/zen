print "=== ZEN Function Testing ==="

print "1. Basic function with mixed parameter types:"
function calculate x y operation
    if operation = "add"
        return x + y
    elif operation = "multiply"  
        return x * y
    else
        return 0

set result1 calculate 10 5 "add"
print "10 + 5 = " + to_string result1

set result2 calculate 3 4 "multiply"
print "3 * 4 = " + to_string result2

print ""
print "2. Function with array and object parameters:"
function process_data arr obj
    set total 0
    for item in arr
        set total total + item
    return total + obj.multiplier

set numbers 1, 2, 3, 4, 5
set config multiplier 10, name "test"
set result3 process_data numbers config
print "Array sum * multiplier = " + to_string result3

print ""
print "3. Function returning complex types:"
function create_user name age
    return name name, age age, active true

set user create_user "Alice" 30
print "Created user: " + user.name + " (age: " + to_string user.age + ")"

print ""
print "4. Testing function error cases:"
print "4a. Missing arguments (should fail):"
try
    set bad_result calculate 10 5
    print "ERROR: Should have failed"
catch
    print "✓ Correctly caught missing argument error"

print ""
print "4b. Too many arguments (should fail):"  
try
    set bad_result2 calculate 10 5 "add" "extra"
    print "ERROR: Should have failed"
catch
    print "✓ Correctly caught too many arguments error"