## TASK MANAGEMENT

### Task Management with task.js

The project includes a `task.js` utility that simplifies task creation and management. You MUST use this tool to create and update tasks.

### Creating Tasks

```bash
# Create a new task (returns task filename)
TASK_FILE=$(node task.js create {{AGENT_ID}} "Brief description of your task" file1.c file2.h | grep "Created task:" | cut -d' ' -f3)

# Example:
TASK_FILE=$(node task.js create {{AGENT_ID}} "Implement lexer_scan_number function" src/core/lexer.c src/include/zen/core/lexer.h | grep "Created task:" | cut -d' ' -f3)
```

### Adding Activities

Track your progress by adding activities as you work:

```bash
# Add a simple activity
node task.js activity $TASK_FILE "Starting implementation of integer parsing"

# Add activity when making progress
node task.js activity $TASK_FILE "Completed integer parsing logic" --success "All integer tests pass"

# Add activity when encountering issues
node task.js activity $TASK_FILE "Attempting float parsing" --fail "Need to handle scientific notation"
```

### Completing Tasks

```bash
# Complete task successfully
node task.js complete $TASK_FILE --success "Implemented number scanning with full float support"

# Complete task with failure
node task.js complete $TASK_FILE --fail "Blocked by missing AST node definitions"
```

### Checking Status

```bash
# View task status
node task.js status $TASK_FILE

# List all your active tasks
node task.js list --active | grep {{AGENT_ID}}

# List completed tasks
node task.js list --completed | grep {{AGENT_ID}}
```

### Complete Workflow Example

```bash
# 1. Create task when starting work
TASK_FILE=$(node task.js create {{AGENT_ID}} "Implement lexer_scan_string function" src/core/lexer.c | grep "Created task:" | cut -d' ' -f3)

# 2. Add activity when starting
node task.js activity $TASK_FILE "Analyzing string token requirements"

# 3. Add activities as you progress
node task.js activity $TASK_FILE "Implementing escape sequence handling"
node task.js activity $TASK_FILE "Added support for unicode escapes" --success "Tests passing"

# 4. Complete the task
node task.js complete $TASK_FILE --success "String scanning fully implemented with escape sequences"
```

### Manual Task Creation (Fallback)

If task.js is unavailable, use this manual method:
```bash
TIMESTAMP=$(date +%Y%m%d-%H%M)
UNIX_TIME=$(date +%s)
cat > tasks/${TIMESTAMP}.yaml << EOF
agent: {{AGENT_ID}}
task: <Your task description>
created: $UNIX_TIME
completed: false
files:
  - <files you'll work on>
activities:
  - timestamp: $UNIX_TIME
    start: $UNIX_TIME
    end: 0
    method: Task initialized
    success: false
    fail: false
    why_success: In progress
    why_fail: Not completed yet
EOF
```

### Task Analysis with Vision

Your tasks will be tracked by `make vision`:
- **Active tasks**: Show with [agent-id] next to files being worked on
- **Fitness score**: Based on your success rate and completion rate
- **Swarm coordination**: Queen can see all active tasks to avoid conflicts

### Example Task Creation

When assigned "Implement lexer_scan_number function":
```bash
TIMESTAMP=$(date +%Y%m%d-%H%M)
UNIX_TIME=$(date +%s)
cat > tasks/${TIMESTAMP}.yaml << EOF
agent: {{AGENT_ID}}
task: Implement lexer_scan_number function for NUMBER tokens
created: $UNIX_TIME
completed: false
files:
  - src/core/lexer.c
  - src/include/zen/core/lexer.h
steps:
  - $UNIX_TIME:
      start: $UNIX_TIME
      end: 0
      method: Implementing number scanning with support for integers and floats
      success: false
      fail: false
      why_success: In progress
      why_fail: Not completed yet
EOF
```