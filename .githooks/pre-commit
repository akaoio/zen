#!/bin/bash
# ZEN Pre-commit Hook - Enforces manifest compliance

set -e

echo "üîí Running ZEN manifest enforcement..."

# Run manifest enforcement
if ! node scripts/enforce_manifest.js; then
    echo ""
    echo "‚ùå Pre-commit check failed!"
    echo "   Your changes violate the codebase manifest."
    echo "   Please fix the violations before committing."
    exit 1
fi

# Check code formatting
echo ""
echo "üìù Checking code formatting..."
if ! make format-check > /dev/null 2>&1; then
    echo "‚ùå Code formatting check failed!"
    echo "   Run 'make format' to fix formatting issues."
    exit 1
fi

echo ""
echo "‚úÖ All pre-commit checks passed!"